
@{
    ViewData["Header"] = "Header";
}


<div class="header-wrapper">

    <div class="header-left">
        <a href="/" class="logo">SHOP New</a>
    </div>

<div class="search-box">
    <form asp-controller="Home" asp-action="Search" method="get">
        <input type="text" id="searchInput" name="keyword" placeholder="TÃ¬m sáº£n pháº©m..." autocomplete="off" />
        <button type="submit" class="search-btn">TÃ¬m</button>
    </form>

    <ul id="suggestList" class="suggest-box"></ul>
</div>

    <div class="header-right">

        @{
            var userName = Context.Request.Cookies["FullName"];
        }

        <div class="header-right">

        @if (string.IsNullOrEmpty(userName))
        {
            <a asp-controller="Account" asp-action="Login">ÄÄƒng nháº­p</a>
            @* <a asp-controller="Account" asp-action="Register">ÄÄƒng kÃ½</a> *@
        }
        else
        {
            <span class="user-name">ChÃ o má»«ng <br />ğŸ‘¤ @userName</span>
            @* <a asp-controller="Account" asp-action="Logout">ÄÄƒng xuáº¥t</a> *@
        }
    </div>
        <a asp-controller="Cart" asp-action="Index">Giá» hÃ ng ğŸ›’</a>
        <button class="menu-btn" onclick="openMenu()">â˜°</button>
    </div>
</div>

<div id="sideMenu" class="side-menu">
    <button class="close-btn" onclick="closeMenu()">Ã—</button>
    <ul>

    </ul>
</div>
<script>
document.getElementById("searchInput").addEventListener("keyup", function () {
    let keyword = this.value;

    if (keyword.length < 1) {
        document.getElementById("suggestList").innerHTML = "";
        return;
    }

    fetch(`/Home/SearchSuggest?keyword=${keyword}`)
        .then(res => res.json())
        .then(data => {
            let html = "";
            data.forEach(item => {
                html += `<li onclick="selectSuggest('${item}')">${item}</li>`;
            });
            document.getElementById("suggestList").innerHTML = html;
        });
});

function selectSuggest(text) {
    document.getElementById("searchInput").value = text;
    document.getElementById("suggestList").innerHTML = "";
}
</script>